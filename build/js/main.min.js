"use strict";function addItem(e){addItemToDOM(e),document.getElementById("item").value="",data.todo.push(e),dataObjectUpdated()}function renderTodoList(){if(data.todo.length||data.completed.length){for(var e=0;e<data.todo.length;e++)addItemToDOM(data.todo[e]);for(var t=0;t<data.completed.length;t++)addItemToDOM(data.completed[t],!0)}}function dataObjectUpdated(){localStorage.setItem("todoList",JSON.stringify(data))}function removeItem(){var e=this.parentNode.parentNode,t=e.parentNode,d=t.id,a=e.innerText;"todo"===d?data.todo.splice(data.todo.indexOf(a),1):data.completed.splice(data.completed.indexOf(a),1),dataObjectUpdated(),t.removeChild(e)}function completeItem(){var e=this.parentNode.parentNode,t=e.parentNode,d=t.id,a=e.innerText;"todo"===d?(data.todo.splice(data.todo.indexOf(a),1),data.completed.push(a)):(data.completed.splice(data.completed.indexOf(a),1),data.todo.push(a)),dataObjectUpdated();var o="todo"===d?document.getElementById("completed"):document.getElementById("todo");t.removeChild(e),o.insertBefore(e,o.childNodes[0])}function addItemToDOM(e,t){var d=t?document.getElementById("completed"):document.getElementById("todo"),a=document.createElement("li");a.setAttribute("draggable","true"),a.innerText=e;var o=document.createElement("div");o.classList.add("buttons");var n=document.createElement("button");n.classList.add("remove"),n.innerHTML=removeSVG,n.addEventListener("click",removeItem);var c=document.createElement("button");c.classList.add("complete"),c.innerHTML=completeSVG,c.addEventListener("click",completeItem),o.appendChild(n),o.appendChild(c),a.appendChild(o),d.insertBefore(a,d.childNodes[0])}var data=localStorage.getItem("todoList")?JSON.parse(localStorage.getItem("todoList")):{todo:[],completed:[]},removeSVG='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 22 22" style="enable-background:new 0 0 22 22;" xml:space="preserve"><g><g><path class="fill" d="M16.1,3.6h-1.9V3.3c0-1.3-1-2.3-2.3-2.3h-1.7C8.9,1,7.8,2,7.8,3.3v0.2H5.9c-1.3,0-2.3,1-2.3,2.3v1.3c0,0.5,0.4,0.9,0.9,1v10.5c0,1.3,1,2.3,2.3,2.3h8.5c1.3,0,2.3-1,2.3-2.3V8.2c0.5-0.1,0.9-0.5,0.9-1V5.9C18.4,4.6,17.4,3.6,16.1,3.6z M9.1,3.3c0-0.6,0.5-1.1,1.1-1.1h1.7c0.6,0,1.1,0.5,1.1,1.1v0.2H9.1V3.3z M16.3,18.7c0,0.6-0.5,1.1-1.1,1.1H6.7c-0.6,0-1.1-0.5-1.1-1.1V8.2h10.6L16.3,18.7L16.3,18.7z M17.2,7H4.8V5.9c0-0.6,0.5-1.1,1.1-1.1h10.2c0.6,0,1.1,0.5,1.1,1.1V7z"/></g><g><g><path class="fill" d="M11,18c-0.4,0-0.6-0.3-0.6-0.6v-6.8c0-0.4,0.3-0.6,0.6-0.6s0.6,0.3,0.6,0.6v6.8C11.6,17.7,11.4,18,11,18z"/></g><g><path class="fill" d="M8,18c-0.4,0-0.6-0.3-0.6-0.6v-6.8C7.4,10.2,7.7,10,8,10c0.4,0,0.6,0.3,0.6,0.6v6.8C8.7,17.7,8.4,18,8,18z"/></g><g><path class="fill" d="M14,18c-0.4,0-0.6-0.3-0.6-0.6v-6.8c0-0.4,0.3-0.6,0.6-0.6c0.4,0,0.6,0.3,0.6,0.6v6.8C14.6,17.7,14.3,18,14,18z"/></g></g></g></svg>',completeSVG='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 22 22" style="enable-background:new 0 0 22 22;" xml:space="preserve"><rect y="0" class="noFill" width="22" height="22"/><g><path class="fill" d="M9.7,14.4L9.7,14.4c-0.2,0-0.4-0.1-0.5-0.2l-2.7-2.7c-0.3-0.3-0.3-0.8,0-1.1s0.8-0.3,1.1,0l2.1,2.1l4.8-4.8c0.3-0.3,0.8-0.3,1.1,0s0.3,0.8,0,1.1l-5.3,5.3C10.1,14.3,9.9,14.4,9.7,14.4z"/></g></svg>';renderTodoList(),document.getElementById("add").addEventListener("click",function(){var e=document.getElementById("item").value;e&&addItem(e)}),document.getElementById("item").addEventListener("keydown",function(e){var t=this.value;"Enter"!==e.code&&"NumpadEnter"!==e.code||!t||addItem(t)});var dragStart=function(e){e.dataTransfer.setData("text/plain",e.target.id)},allowDrop=function(e){e.preventDefault()},drop=function(e){e.preventDefault();e.dataTransfer.getData("text/plain");var t=document.querySelector("li");try{e.target.appendChild(t)}catch(e){console.warn("you can't move the item to the same place")}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYWRkSXRlbSIsInZhbHVlIiwiYWRkSXRlbVRvRE9NIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImRhdGEiLCJ0b2RvIiwicHVzaCIsImRhdGFPYmplY3RVcGRhdGVkIiwicmVuZGVyVG9kb0xpc3QiLCJsZW5ndGgiLCJjb21wbGV0ZWQiLCJpIiwiaiIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicmVtb3ZlSXRlbSIsIml0ZW0iLCJ0aGlzIiwicGFyZW50Tm9kZSIsInBhcmVudCIsImlkIiwiaW5uZXJUZXh0Iiwic3BsaWNlIiwiaW5kZXhPZiIsInJlbW92ZUNoaWxkIiwiY29tcGxldGVJdGVtIiwidGFyZ2V0IiwiaW5zZXJ0QmVmb3JlIiwiY2hpbGROb2RlcyIsInRleHQiLCJsaXN0IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImJ1dHRvbnMiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJpbm5lckhUTUwiLCJyZW1vdmVTVkciLCJhZGRFdmVudExpc3RlbmVyIiwiY29tcGxldGUiLCJjb21wbGV0ZVNWRyIsImFwcGVuZENoaWxkIiwiZ2V0SXRlbSIsInBhcnNlIiwiZSIsImNvZGUiLCJkcmFnU3RhcnQiLCJldmVudCIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJhbGxvd0Ryb3AiLCJwcmV2ZW50RGVmYXVsdCIsImRyb3AiLCJnZXREYXRhIiwiZWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlcnJvciIsImNvbnNvbGUiLCJ3YXJuIl0sIm1hcHBpbmdzIjoiQUFBQSxhQTZCQSxTQUFBQSxRQUFBQyxHQUNBQyxhQUFBRCxHQUNBRSxTQUFBQyxlQUFBLFFBQUFILE1BQUEsR0FFQUksS0FBQUMsS0FBQUMsS0FBQU4sR0FDQU8sb0JBR0EsU0FBQUMsaUJBQ0EsR0FBQUosS0FBQUMsS0FBQUksUUFBQUwsS0FBQU0sVUFBQUQsT0FBQSxDQUVBLElBQUEsSUFB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QUFnQixZQUFBYSxHQUNBLE1BQUFFLEdBQ0FDLFFBQUFDLEtBQUEiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBkYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3RvZG9MaXN0JykgPyBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2RvTGlzdCcpKSA6IHtcbiAgdG9kbzogW10sXG4gIGNvbXBsZXRlZDogW11cbn07XG5cbi8vIFJlbW92ZSBhbmQgY29tcGxldGUgaWNvbnMgaW4gU1ZHIGZvcm1hdFxudmFyIHJlbW92ZVNWRyA9ICc8c3ZnIHZlcnNpb249XCIxLjFcIiBpZD1cIkxheWVyXzFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgeD1cIjBweFwiIHk9XCIwcHhcIiB2aWV3Qm94PVwiMCAwIDIyIDIyXCIgc3R5bGU9XCJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDIyIDIyO1wiIHhtbDpzcGFjZT1cInByZXNlcnZlXCI+PGc+PGc+PHBhdGggY2xhc3M9XCJmaWxsXCIgZD1cIk0xNi4xLDMuNmgtMS45VjMuM2MwLTEuMy0xLTIuMy0yLjMtMi4zaC0xLjdDOC45LDEsNy44LDIsNy44LDMuM3YwLjJINS45Yy0xLjMsMC0yLjMsMS0yLjMsMi4zdjEuM2MwLDAuNSwwLjQsMC45LDAuOSwxdjEwLjVjMCwxLjMsMSwyLjMsMi4zLDIuM2g4LjVjMS4zLDAsMi4zLTEsMi4zLTIuM1Y4LjJjMC41LTAuMSwwLjktMC41LDAuOS0xVjUuOUMxOC40LDQuNiwxNy40LDMuNiwxNi4xLDMuNnogTTkuMSwzLjNjMC0wLjYsMC41LTEuMSwxLjEtMS4xaDEuN2MwLjYsMCwxLjEsMC41LDEuMSwxLjF2MC4ySDkuMVYzLjN6IE0xNi4zLDE4LjdjMCwwLjYtMC41LDEuMS0xLjEsMS4xSDYuN2MtMC42LDAtMS4xLTAuNS0xLjEtMS4xVjguMmgxMC42TDE2LjMsMTguN0wxNi4zLDE4Ljd6IE0xNy4yLDdINC44VjUuOWMwLTAuNiwwLjUtMS4xLDEuMS0xLjFoMTAuMmMwLjYsMCwxLjEsMC41LDEuMSwxLjFWN3pcIi8+PC9nPjxnPjxnPjxwYXRoIGNsYXNzPVwiZmlsbFwiIGQ9XCJNMTEsMThjLTAuNCwwLTAuNi0wLjMtMC42LTAuNnYtNi44YzAtMC40LDAuMy0wLjYsMC42LTAuNnMwLjYsMC4zLDAuNiwwLjZ2Ni44QzExLjYsMTcuNywxMS40LDE4LDExLDE4elwiLz48L2c+PGc+PHBhdGggY2xhc3M9XCJmaWxsXCIgZD1cIk04LDE4Yy0wLjQsMC0wLjYtMC4zLTAuNi0wLjZ2LTYuOEM3LjQsMTAuMiw3LjcsMTAsOCwxMGMwLjQsMCwwLjYsMC4zLDAuNiwwLjZ2Ni44QzguNywxNy43LDguNCwxOCw4LDE4elwiLz48L2c+PGc+PHBhdGggY2xhc3M9XCJmaWxsXCIgZD1cIk0xNCwxOGMtMC40LDAtMC42LTAuMy0wLjYtMC42di02LjhjMC0wLjQsMC4zLTAuNiwwLjYtMC42YzAuNCwwLDAuNiwwLjMsMC42LDAuNnY2LjhDMTQuNiwxNy43LDE0LjMsMTgsMTQsMTh6XCIvPjwvZz48L2c+PC9nPjwvc3ZnPic7XG52YXIgY29tcGxldGVTVkcgPSAnPHN2ZyB2ZXJzaW9uPVwiMS4xXCIgaWQ9XCJMYXllcl8xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHg9XCIwcHhcIiB5PVwiMHB4XCIgdmlld0JveD1cIjAgMCAyMiAyMlwiIHN0eWxlPVwiZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyMiAyMjtcIiB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiPjxyZWN0IHk9XCIwXCIgY2xhc3M9XCJub0ZpbGxcIiB3aWR0aD1cIjIyXCIgaGVpZ2h0PVwiMjJcIi8+PGc+PHBhdGggY2xhc3M9XCJmaWxsXCIgZD1cIk05LjcsMTQuNEw5LjcsMTQuNGMtMC4yLDAtMC40LTAuMS0wLjUtMC4ybC0yLjctMi43Yy0wLjMtMC4zLTAuMy0wLjgsMC0xLjFzMC44LTAuMywxLjEsMGwyLjEsMi4xbDQuOC00LjhjMC4zLTAuMywwLjgtMC4zLDEuMSwwczAuMywwLjgsMCwxLjFsLTUuMyw1LjNDMTAuMSwxNC4zLDkuOSwxNC40LDkuNywxNC40elwiLz48L2c+PC9zdmc+JztcblxucmVuZGVyVG9kb0xpc3QoKTtcblxuLy8gVXNlciBjbGlja2VkIG9uIHRoZSBhZGQgYnV0dG9uXG4vLyBJZiB0aGVyZSBpcyBhbnkgdGV4dCBpbnNpZGUgdGhlIGl0ZW0gZmllbGQsIGFkZCB0aGF0IHRleHQgdG8gdGhlIHRvZG8gbGlzdFxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZCcpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICB2YXIgdmFsdWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlbScpLnZhbHVlO1xuICBpZiAodmFsdWUpIHtcbiAgICBhZGRJdGVtKHZhbHVlKTtcbiAgfVxufSk7XG5cbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpdGVtJykuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gIHZhciB2YWx1ZSA9IHRoaXMudmFsdWU7XG4gIGlmICgoZS5jb2RlID09PSAnRW50ZXInIHx8IGUuY29kZSA9PT0gJ051bXBhZEVudGVyJykgJiYgdmFsdWUpIHtcbiAgICBhZGRJdGVtKHZhbHVlKTtcbiAgfVxufSk7XG5cbmZ1bmN0aW9uIGFkZEl0ZW0odmFsdWUpIHtcbiAgYWRkSXRlbVRvRE9NKHZhbHVlKTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZW0nKS52YWx1ZSA9ICcnO1xuXG4gIGRhdGEudG9kby5wdXNoKHZhbHVlKTtcbiAgZGF0YU9iamVjdFVwZGF0ZWQoKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyVG9kb0xpc3QoKSB7XG4gIGlmICghZGF0YS50b2RvLmxlbmd0aCAmJiAhZGF0YS5jb21wbGV0ZWQubGVuZ3RoKSByZXR1cm47XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLnRvZG8ubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgdmFsdWUgPSBkYXRhLnRvZG9baV07XG4gICAgYWRkSXRlbVRvRE9NKHZhbHVlKTtcbiAgfVxuXG4gIGZvciAodmFyIGogPSAwOyBqIDwgZGF0YS5jb21wbGV0ZWQubGVuZ3RoOyBqKyspIHtcbiAgICB2YXIgX3ZhbHVlID0gZGF0YS5jb21wbGV0ZWRbal07XG4gICAgYWRkSXRlbVRvRE9NKF92YWx1ZSwgdHJ1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGF0YU9iamVjdFVwZGF0ZWQoKSB7XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2RvTGlzdCcsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlSXRlbSgpIHtcbiAgdmFyIGl0ZW0gPSB0aGlzLnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgdmFyIHBhcmVudCA9IGl0ZW0ucGFyZW50Tm9kZTtcbiAgdmFyIGlkID0gcGFyZW50LmlkO1xuICB2YXIgdmFsdWUgPSBpdGVtLmlubmVyVGV4dDtcblxuICBpZiAoaWQgPT09ICd0b2RvJykge1xuICAgIGRhdGEudG9kby5zcGxpY2UoZGF0YS50b2RvLmluZGV4T2YodmFsdWUpLCAxKTtcbiAgfSBlbHNlIHtcbiAgICBkYXRhLmNvbXBsZXRlZC5zcGxpY2UoZGF0YS5jb21wbGV0ZWQuaW5kZXhPZih2YWx1ZSksIDEpO1xuICB9XG4gIGRhdGFPYmplY3RVcGRhdGVkKCk7XG5cbiAgcGFyZW50LnJlbW92ZUNoaWxkKGl0ZW0pO1xufVxuXG5mdW5jdGlvbiBjb21wbGV0ZUl0ZW0oKSB7XG4gIHZhciBpdGVtID0gdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gIHZhciBwYXJlbnQgPSBpdGVtLnBhcmVudE5vZGU7XG4gIHZhciBpZCA9IHBhcmVudC5pZDtcbiAgdmFyIHZhbHVlID0gaXRlbS5pbm5lclRleHQ7XG5cbiAgaWYgKGlkID09PSAndG9kbycpIHtcbiAgICBkYXRhLnRvZG8uc3BsaWNlKGRhdGEudG9kby5pbmRleE9mKHZhbHVlKSwgMSk7XG4gICAgZGF0YS5jb21wbGV0ZWQucHVzaCh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgZGF0YS5jb21wbGV0ZWQuc3BsaWNlKGRhdGEuY29tcGxldGVkLmluZGV4T2YodmFsdWUpLCAxKTtcbiAgICBkYXRhLnRvZG8ucHVzaCh2YWx1ZSk7XG4gIH1cbiAgZGF0YU9iamVjdFVwZGF0ZWQoKTtcblxuICAvLyBDaGVjayBpZiB0aGUgaXRlbSBzaG91bGQgYmUgYWRkZWQgdG8gdGhlIGNvbXBsZXRlZCBsaXN0IG9yIHRvIHJlLWFkZGVkIHRvIHRoZSB0b2RvIGxpc3RcbiAgdmFyIHRhcmdldCA9IGlkID09PSAndG9kbycgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tcGxldGVkJykgOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndG9kbycpO1xuXG4gIHBhcmVudC5yZW1vdmVDaGlsZChpdGVtKTtcbiAgdGFyZ2V0Lmluc2VydEJlZm9yZShpdGVtLCB0YXJnZXQuY2hpbGROb2Rlc1swXSk7XG59XG5cbi8vIEFkZHMgYSBuZXcgaXRlbSB0byB0aGUgdG9kbyBsaXN0XG5mdW5jdGlvbiBhZGRJdGVtVG9ET00odGV4dCwgY29tcGxldGVkKSB7XG4gIHZhciBsaXN0ID0gY29tcGxldGVkID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbXBsZXRlZCcpIDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvZG8nKTtcblxuICB2YXIgaXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gIGl0ZW0uc2V0QXR0cmlidXRlKFwiZHJhZ2dhYmxlXCIsIFwidHJ1ZVwiKTtcblxuICBpdGVtLmlubmVyVGV4dCA9IHRleHQ7XG5cbiAgdmFyIGJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgYnV0dG9ucy5jbGFzc0xpc3QuYWRkKCdidXR0b25zJyk7XG5cbiAgdmFyIHJlbW92ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICByZW1vdmUuY2xhc3NMaXN0LmFkZCgncmVtb3ZlJyk7XG4gIHJlbW92ZS5pbm5lckhUTUwgPSByZW1vdmVTVkc7XG5cbiAgLy8gQWRkIGNsaWNrIGV2ZW50IGZvciByZW1vdmluZyB0aGUgaXRlbVxuICByZW1vdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCByZW1vdmVJdGVtKTtcblxuICB2YXIgY29tcGxldGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgY29tcGxldGUuY2xhc3NMaXN0LmFkZCgnY29tcGxldGUnKTtcbiAgY29tcGxldGUuaW5uZXJIVE1MID0gY29tcGxldGVTVkc7XG5cbiAgLy8gQWRkIGNsaWNrIGV2ZW50IGZvciBjb21wbGV0aW5nIHRoZSBpdGVtXG4gIGNvbXBsZXRlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY29tcGxldGVJdGVtKTtcblxuICBidXR0b25zLmFwcGVuZENoaWxkKHJlbW92ZSk7XG4gIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoY29tcGxldGUpO1xuICBpdGVtLmFwcGVuZENoaWxkKGJ1dHRvbnMpO1xuXG4gIGxpc3QuaW5zZXJ0QmVmb3JlKGl0ZW0sIGxpc3QuY2hpbGROb2Rlc1swXSk7XG59XG5cbi8vPT09PT09PT09PT09PT09PT09PT09IERyYWcgJiBEcm9wXG52YXIgZHJhZ1N0YXJ0ID0gZnVuY3Rpb24gZHJhZ1N0YXJ0KGV2ZW50KSB7XG4gIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKFwidGV4dC9wbGFpblwiLCBldmVudC50YXJnZXQuaWQpO1xufTtcbnZhciBhbGxvd0Ryb3AgPSBmdW5jdGlvbiBhbGxvd0Ryb3AoZXZlbnQpIHtcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgLy9ldmVudC5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmQgPSAnIzdmODA4Mic7XG59O1xudmFyIGRyb3AgPSBmdW5jdGlvbiBkcm9wKGV2ZW50KSB7XG4gIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gIHZhciBkYXRhID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJ0ZXh0L3BsYWluXCIpO1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2xpJyk7XG4gIC8vZXZlbnQuY3VycmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3doaXRlJ1xuICB0cnkge1xuICAgIGV2ZW50LnRhcmdldC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLndhcm4oXCJ5b3UgY2FuJ3QgbW92ZSB0aGUgaXRlbSB0byB0aGUgc2FtZSBwbGFjZVwiKTtcbiAgfVxufTtcblxuLy89PT09PT09PT09PT09PT09PSJdfQ==
